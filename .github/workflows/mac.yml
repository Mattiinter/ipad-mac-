name: Mac_iPad_TigerVNC
on: workflow_dispatch
jobs:
  run-mac:
    runs-on: macos-latest
    steps:
      - name: 1. Installazione TigerVNC
        run: |
          # Installiamo un server VNC che non sia quello di Apple
          brew install tigervnc
          
          # Impostiamo la password '1234' per TigerVNC
          mkdir -p ~/.vnc
          echo "123456" | vncpasswd -f > ~/.vnc/passwd
          chmod 600 ~/.vnc/passwd
          
          # Avviamo il server sulla porta 5900
          vncserver :0 -rfbport 5900 -localhost no -SecurityTypes VncAuth
          
      - name: 2. Avvio Tunnel Bore
        run: |
          curl -L https://github.com/ekzhang/bore/releases/download/v0.5.1/bore-v0.5.1-x86_64-apple-darwin.tar.gz | tar -xz
          ./bore local 5900 --to bore.pub
